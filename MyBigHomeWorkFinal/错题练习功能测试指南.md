# 错题练习功能测试指南

## 📋 测试目标

本测试指南旨在验证错题练习功能的完整性、稳定性和用户体验，确保功能正常运行。

## 🎯 测试范围

### 核心功能
1. 练习模式选择
2. 题目加载与展示
3. 答题逻辑
4. 结果统计与展示
5. 数据持久化
6. 页面导航

## 📝 详细测试用例

### 1. 前置准备

#### 1.1 准备测试数据

**步骤**：
1. 打开应用，进入词汇训练/真题练习/模拟考试
2. 故意答错至少10道题目（确保有错题数据）
3. 至少包含不同分类的错题（词汇训练、真题练习、模拟考试）

**预期结果**：
- 错题本中有至少10道错题
- 错题分布在不同分类中

---

### 2. 进入错题练习

#### 测试用例 2.1：从错题本进入练习

**步骤**：
1. 从主页点击"错题本"
2. 查看错题列表（确认有错题）
3. 点击底部"错题练习"按钮

**预期结果**：
- ✅ 弹出练习模式选择对话框
- ✅ 对话框显示正确的错题数量
- ✅ 显示两个选项："顺序练习"和"随机练习"

#### 测试用例 2.2：无错题时的提示

**步骤**：
1. 清空所有错题（点击清空按钮）
2. 点击"错题练习"按钮

**预期结果**：
- ✅ 显示提示："当前没有可练习的错题"
- ✅ 不跳转到练习页面

---

### 3. 练习模式测试

#### 测试用例 3.1：顺序练习模式

**步骤**：
1. 点击"错题练习"按钮
2. 选择"顺序练习 (按时间顺序)"
3. 进入练习页面
4. 观察题目顺序

**预期结果**：
- ✅ 成功跳转到练习页面
- ✅ 顶部显示"顺序练习"
- ✅ 题目按照时间顺序展示（最早的错题先出现）
- ✅ 计时器开始运行（从00:00开始）

#### 测试用例 3.2：随机练习模式

**步骤**：
1. 点击"错题练习"按钮
2. 选择"随机练习 (打乱顺序)"
3. 进入练习页面
4. 记录前3道题目
5. 退出后重新进入随机练习
6. 对比题目顺序

**预期结果**：
- ✅ 成功跳转到练习页面
- ✅ 顶部显示"随机练习"
- ✅ 题目顺序与顺序练习不同
- ✅ 两次进入的题目顺序不同

---

### 4. 分类筛选测试

#### 测试用例 4.1：按分类练习

**步骤**：
1. 在错题本页面点击"词汇训练"筛选按钮
2. 点击"错题练习"
3. 选择任意练习模式
4. 观察显示的题目

**预期结果**：
- ✅ 只显示"词汇训练"分类的错题
- ✅ 题目标签显示正确的分类
- ✅ 题目数量与筛选后的数量一致

#### 测试用例 4.2：全部分类练习

**步骤**：
1. 在错题本页面点击"全部"筛选按钮
2. 点击"错题练习"
3. 选择任意练习模式

**预期结果**：
- ✅ 显示所有分类的错题
- ✅ 题目数量等于错题总数

---

### 5. 答题功能测试

#### 测试用例 5.1：答对题目

**步骤**：
1. 进入错题练习
2. 选择正确答案
3. 观察反馈

**预期结果**：
- ✅ 选中的按钮变为绿色
- ✅ 显示"回答正确！"提示（绿色图标）
- ✅ 显示正确答案
- ✅ 显示答案解析（如果有）
- ✅ "正确"计数增加1
- ✅ 进度条更新

#### 测试用例 5.2：答错题目

**步骤**：
1. 进入错题练习
2. 选择错误答案
3. 观察反馈

**预期结果**：
- ✅ 选中的按钮变为红色
- ✅ 正确答案按钮变为绿色
- ✅ 显示"回答错误"提示（红色图标）
- ✅ 显示正确答案
- ✅ 显示答案解析（如果有）
- ✅ "错误"计数增加1
- ✅ 进度条更新

#### 测试用例 5.3：防止重复选择

**步骤**：
1. 进入错题练习
2. 选择一个答案
3. 尝试再次点击其他选项

**预期结果**：
- ✅ 无法再次选择
- ✅ 只能点击"下一题"按钮

---

### 6. 进度与计时测试

#### 测试用例 6.1：进度显示

**步骤**：
1. 进入练习页面
2. 观察进度信息
3. 答完每道题后观察变化

**预期结果**：
- ✅ 顶部显示"1/10"等格式的进度
- ✅ 进度条正确显示百分比
- ✅ 每答完一题，进度+1
- ✅ 正确/错误统计实时更新

#### 测试用例 6.2：计时器功能

**步骤**：
1. 进入练习页面
2. 观察右上角计时器
3. 等待至少1分钟

**预期结果**：
- ✅ 计时器从00:00开始
- ✅ 每秒更新一次
- ✅ 格式为"MM:SS"
- ✅ 计时准确

---

### 7. 练习结果测试

#### 测试用例 7.1：高分结果（90%以上）

**步骤**：
1. 完成一轮练习（至少答对90%）
2. 查看结果页面

**预期结果**：
- ✅ 显示星星图标（绿色）
- ✅ 标题显示"太棒了！"（绿色）
- ✅ 鼓励消息："您的掌握程度非常好，继续保持！"
- ✅ 统计数据正确：总题数、答对数、答错数、正确率、用时
- ✅ 正确率 ≥ 90%

#### 测试用例 7.2：良好结果（70-89%）

**步骤**：
1. 完成一轮练习（答对70-89%）
2. 查看结果页面

**预期结果**：
- ✅ 显示对勾图标（蓝色）
- ✅ 标题显示"做得不错！"（蓝色）
- ✅ 鼓励消息："继续努力，争取更好的成绩！"
- ✅ 70% ≤ 正确率 < 90%

#### 测试用例 7.3：及格结果（50-69%）

**步骤**：
1. 完成一轮练习（答对50-69%）
2. 查看结果页面

**预期结果**：
- ✅ 显示信息图标（橙色）
- ✅ 标题显示"还需努力"（橙色）
- ✅ 建议消息："建议再次练习这些错题，加强记忆"
- ✅ 50% ≤ 正确率 < 70%

#### 测试用例 7.4：低分结果（50%以下）

**步骤**：
1. 完成一轮练习（答对少于50%）
2. 查看结果页面

**预期结果**：
- ✅ 显示错误图标（红色）
- ✅ 标题显示"需要加强"（红色）
- ✅ 建议消息："建议重点复习这些知识点"
- ✅ 正确率 < 50%

---

### 8. 数据持久化测试

#### 测试用例 8.1：掌握状态更新

**步骤**：
1. 记录某道错题的ID
2. 在练习中答对这道题
3. 退出练习
4. 返回错题本查看该题

**预期结果**：
- ✅ 该题标记为"已掌握"状态
- ✅ 在"已掌握"统计中增加1

#### 测试用例 8.2：错误次数累计

**步骤**：
1. 记录某道错题的错误次数
2. 在练习中答错这道题
3. 退出练习
4. 返回错题本查看该题

**预期结果**：
- ✅ 错误次数增加1
- ✅ 数据库中正确保存

#### 测试用例 8.3：只练习未掌握的题目

**步骤**：
1. 确保有部分错题已标记为"已掌握"
2. 开始错题练习
3. 观察练习的题目

**预期结果**：
- ✅ 优先显示未掌握的题目
- ✅ 如果有未掌握的题目，不显示已掌握的题目
- ✅ 如果全部掌握，显示提示并练习全部题目

---

### 9. 页面导航测试

#### 测试用例 9.1：继续练习

**步骤**：
1. 完成一轮练习
2. 在结果页面点击"继续练习"

**预期结果**：
- ✅ 跳转到新的练习页面
- ✅ 使用相同的练习模式和分类筛选
- ✅ 题目重新加载
- ✅ 计时器重置

#### 测试用例 9.2：查看错题本

**步骤**：
1. 完成一轮练习
2. 在结果页面点击"查看错题本"

**预期结果**：
- ✅ 跳转到错题本页面
- ✅ 显示更新后的错题列表
- ✅ 统计数据已更新

#### 测试用例 9.3：返回首页

**步骤**：
1. 完成一轮练习
2. 在结果页面点击"返回首页"

**预期结果**：
- ✅ 跳转到主页
- ✅ 清除Activity栈（不能通过返回键回到练习页面）

#### 测试用例 9.4：练习中途退出

**步骤**：
1. 开始练习
2. 答完2-3道题
3. 点击返回按钮

**预期结果**：
- ✅ 显示退出确认对话框
- ✅ 对话框提示："确定要退出练习吗？当前进度将会丢失。"
- ✅ 点击"确定"后返回错题本
- ✅ 点击"取消"后继续练习

#### 测试用例 9.5：结果页面返回键

**步骤**：
1. 完成一轮练习
2. 在结果页面按返回键

**预期结果**：
- ✅ 返回到错题本页面（不是练习页面）

---

### 10. 边界情况测试

#### 测试用例 10.1：只有1道错题

**步骤**：
1. 清空错题本，只保留1道错题
2. 开始练习

**预期结果**：
- ✅ 正常显示题目
- ✅ 答题后直接显示结果页面
- ✅ 进度显示"1/1"

#### 测试用例 10.2：大量错题（100+）

**步骤**：
1. 准备100+道错题
2. 开始练习
3. 观察性能

**预期结果**：
- ✅ 页面加载流畅，无卡顿
- ✅ 进度条准确
- ✅ 计时器正常
- ✅ 内存占用正常

#### 测试用例 10.3：题目数据不完整

**步骤**：
1. 找到选项不足4个的错题（如果有）
2. 开始练习

**预期结果**：
- ✅ 显示错误提示："选项数据不完整"
- ✅ 自动跳到下一题
- ✅ 不计入统计

---

### 11. UI/UX测试

#### 测试用例 11.1：屏幕旋转

**步骤**：
1. 进入练习页面
2. 旋转屏幕

**预期结果**：
- ✅ 页面保持竖屏（设置了screenOrientation="portrait"）
- ✅ 数据不丢失

#### 测试用例 11.2：深色模式

**步骤**：
1. 开启系统深色模式
2. 进入练习页面

**预期结果**：
- ✅ 颜色适配深色主题
- ✅ 文字可读性良好
- ✅ 按钮状态清晰

#### 测试用例 11.3：长文本处理

**步骤**：
1. 找到题目文本很长的错题
2. 查看显示效果

**预期结果**：
- ✅ 文本完整显示（可滚动）
- ✅ 布局不混乱
- ✅ 选项按钮正常

---

## 📊 测试报告模板

### 测试执行记录

| 用例编号 | 测试项目 | 测试结果 | 问题描述 | 优先级 |
|---------|---------|---------|---------|--------|
| 2.1 | 从错题本进入练习 | ✅ 通过 | - | - |
| 2.2 | 无错题时的提示 | ✅ 通过 | - | - |
| 3.1 | 顺序练习模式 | ✅ 通过 | - | - |
| ... | ... | ... | ... | ... |

### 问题分类

- **严重问题（P0）**：影响核心功能，必须修复
- **重要问题（P1）**：影响用户体验，应尽快修复
- **一般问题（P2）**：不影响主要功能，可延后修复
- **建议（P3）**：优化建议，可选择性实施

### 测试总结

**测试完成度**：___/42 个用例通过

**主要问题**：
1. ...
2. ...

**优化建议**：
1. ...
2. ...

---

## 🔧 常见问题排查

### 问题1：练习页面无法加载题目

**可能原因**：
- 数据库查询失败
- 错题数据为空
- 分类筛选条件过于严格

**排查步骤**：
1. 检查LogCat日志
2. 确认错题本中有数据
3. 尝试不同的分类筛选

### 问题2：答题后状态未更新

**可能原因**：
- 数据库写入失败
- Repository操作异常
- 线程同步问题

**排查步骤**：
1. 检查数据库操作日志
2. 确认Repository实例正确初始化
3. 检查是否在主线程操作数据库

### 问题3：计时器不准确

**可能原因**：
- CountDownTimer配置错误
- 页面销毁时未停止计时器
- 系统时间异常

**排查步骤**：
1. 检查CountDownTimer的interval设置（应为1000ms）
2. 确认onDestroy中调用timer.cancel()
3. 对比系统时间验证

---

## 📱 测试设备要求

### 最低测试设备

- **操作系统**：Android 8.0+
- **内存**：2GB+
- **屏幕分辨率**：720p+

### 推荐测试设备矩阵

| 设备类型 | 品牌/型号 | Android版本 | 屏幕尺寸 |
|---------|----------|------------|---------|
| 手机 | 小米/华为/OPPO | 10.0+ | 6.0"-6.5" |
| 平板 | 华为MatePad | 10.0+ | 10.0"+ |
| 模拟器 | Android Emulator | 11.0 | 多种分辨率 |

---

## ✅ 测试检查清单

### 功能完整性
- [ ] 所有练习模式可用
- [ ] 分类筛选正常
- [ ] 答题逻辑正确
- [ ] 结果统计准确
- [ ] 数据持久化成功

### 用户体验
- [ ] 页面加载快速
- [ ] 操作流畅无卡顿
- [ ] 反馈及时清晰
- [ ] 导航逻辑合理
- [ ] 提示信息友好

### 稳定性
- [ ] 无崩溃问题
- [ ] 无内存泄漏
- [ ] 无ANR（应用无响应）
- [ ] 数据不丢失
- [ ] 异常情况处理得当

### 兼容性
- [ ] 多设备适配正常
- [ ] 多分辨率显示正常
- [ ] 深色模式兼容
- [ ] 不同Android版本兼容

---

## 📞 问题反馈

如果在测试过程中发现问题，请记录以下信息：

1. **问题描述**：详细描述问题现象
2. **复现步骤**：列出重现问题的操作步骤
3. **预期结果**：描述正确的行为应该是什么
4. **实际结果**：描述实际发生的情况
5. **设备信息**：品牌、型号、Android版本
6. **截图/录屏**：如果可能，提供视觉证据
7. **日志**：LogCat相关错误日志

---

**文档版本**: 1.0  
**创建日期**: 2025-10-07  
**测试人员**: ___________  
**测试日期**: ___________

