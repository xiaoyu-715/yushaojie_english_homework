# 按钮样式问题诊断与解决方案

## 📋 问题描述
词汇训练界面的选项按钮样式没有按照预期显示。

## ✅ 已完成的修改

### 1. 修改的Drawable文件

#### `btn_default_background.xml` - 默认按钮（蓝色）
```xml
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle">
    <corners android:radius="12dp" />
    <solid android:color="#BBDEFB" />  <!-- 浅蓝色背景 -->
    <stroke
        android:width="2dp"
        android:color="#1976D2" />  <!-- 深蓝色边框 -->
</shape>
```

#### `btn_correct_background.xml` - 正确答案（绿色）
```xml
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle">
    <corners android:radius="12dp" />
    <solid android:color="#A5D6A7" />  <!-- 浅绿色背景 -->
    <stroke
        android:width="2dp"
        android:color="#388E3C" />  <!-- 深绿色边框 -->
</shape>
```

#### `btn_error_background.xml` - 错误答案（红色）
```xml
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle">
    <corners android:radius="12dp" />
    <solid android:color="#EF9A9A" />  <!-- 粉红色背景 -->
    <stroke
        android:width="2dp"
        android:color="#D32F2F" />  <!-- 深红色边框 -->
</shape>
```

## 🔍 问题诊断

### 可能的原因：

1. **构建缓存问题** ✓ （已清理）
   - 已删除 `app/build/intermediates/merged_res`
   - 已删除 `app/build/intermediates/packaged_res`
   - 已删除 `app/build/intermediates/incremental/processDebugResources`

2. **代码使用正确的Drawable** ✓
   - `VocabularyActivity.java` 第313行使用 `R.drawable.btn_default_background`
   - `VocabularyActivity.java` 第298行使用 `R.drawable.btn_correct_background`
   - `VocabularyActivity.java` 第301行使用 `R.drawable.btn_error_background`

3. **需要重新编译项目** ⚠️

## 🛠️ 解决方案

### 方法一：使用清理脚本（推荐）

1. 双击运行项目根目录下的 `clean_and_rebuild.bat`
2. 等待清理完成
3. 在Android Studio中：
   - 点击 `Build` → `Clean Project`
   - 点击 `Build` → `Rebuild Project`
4. 重新运行应用

### 方法二：手动在Android Studio中操作

1. 在Android Studio菜单栏：
   - 点击 `Build` → `Clean Project` （清理项目）
   - 等待清理完成
   - 点击 `Build` → `Rebuild Project` （重新构建项目）
   - 等待构建完成

2. 如果还不行，尝试：
   - 点击 `File` → `Invalidate Caches / Restart...`
   - 选择 `Invalidate and Restart`
   - 等待Android Studio重启完成
   - 再次点击 `Build` → `Rebuild Project`

3. 重新运行应用（Shift + F10）

### 方法三：完全清理（终极方案）

如果以上方法都不行，执行以下步骤：

1. 关闭Android Studio
2. 删除以下文件夹：
   - `app\build`
   - `build`
   - `.gradle`
   - `.idea\caches`
3. 重新打开Android Studio
4. 等待Gradle同步完成
5. 点击 `Build` → `Rebuild Project`
6. 重新运行应用

## 📊 验证方法

重新运行应用后，检查以下内容：

### 默认状态（未回答时）
- ✅ 所有4个选项按钮应该是**浅蓝色背景 + 深蓝色边框**

### 回答后状态
- ✅ 正确答案：**浅绿色背景 + 深绿色边框**
- ✅ 错误答案（如果选错）：**粉红色背景 + 深红色边框**
- ✅ 未选择的选项：保持**浅蓝色背景 + 深蓝色边框**

## 🎨 颜色对照表

| 按钮状态 | 背景色 | 边框色 | 背景色代码 | 边框色代码 |
|---------|-------|-------|-----------|-----------|
| 默认状态 | 浅蓝色 | 深蓝色 | #BBDEFB | #1976D2 |
| 正确答案 | 浅绿色 | 深绿色 | #A5D6A7 | #388E3C |
| 错误答案 | 粉红色 | 深红色 | #EF9A9A | #D32F2F |

## 📝 代码关联

### VocabularyActivity.java 关键方法

1. **resetOptionButtons()** (第309-316行)
   - 在显示新问题时重置所有按钮为默认状态
   - 使用 `btn_default_background`

2. **highlightAnswers()** (第292-307行)
   - 在用户回答后高亮显示答案
   - 正确答案使用 `btn_correct_background`
   - 错误选择使用 `btn_error_background`
   - 其他选项使用 `btn_default_background`

## ⚠️ 注意事项

1. **确保使用Debug模式运行**
   - Release模式可能需要额外的清理步骤

2. **检查设备/模拟器**
   - 如果使用真机，确保应用已完全卸载后重新安装
   - 模拟器可以尝试 `Cold Boot` 重启

3. **Gradle版本**
   - 确保Gradle同步成功
   - 检查是否有错误提示

## 🚀 快速测试

重新运行应用后，进入词汇训练页面：

1. 进入应用
2. 点击"词汇训练"
3. 观察4个选项按钮的样式（应该都是蓝色）
4. 选择任意一个答案
5. 观察按钮颜色变化：
   - 正确答案应变为绿色
   - 如果选错，错误选项应变为红色

## 📞 如果问题仍然存在

如果完成以上所有步骤后问题仍然存在，请检查：

1. ✅ drawable文件是否正确修改（已确认）
2. ✅ Java代码是否正确引用（已确认）
3. ⚠️ 是否有编译错误（查看Build窗口）
4. ⚠️ 是否有资源冲突（查看Logcat）
5. ⚠️ 是否有其他地方覆盖了按钮样式

---

**最后更新时间**: 2025-10-02

