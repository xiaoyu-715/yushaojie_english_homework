# 阅读理解题目显示修复说明

## 问题描述
阅读理解部分的题目问题文本没有显示在底部选项窗口中，用户只能看到选项A、B、C、D，但看不到具体的题目问题（如"21. According to Paragraph 1, the practice of tipping in the U.S. ____"）。

## 解决方案

### 1. 布局修改
在 `activity_exam_answer.xml` 中，在题号选择器和选项列表之间添加了题目问题显示区域：

**位置**：第241-253行

```xml
<!-- 当前题目问题 -->
<TextView
    android:id="@+id/tv_bottom_question"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="12dp"
    android:paddingHorizontal="16dp"
    android:paddingVertical="8dp"
    android:text="21. According to Paragraph 1..."
    android:textColor="@color/text_primary"
    android:textSize="15sp"
    android:textStyle="bold"
    android:visibility="gone" />
```

**布局顺序**：
1. 拖动指示器
2. "选择题号："标题
3. 题号切换器（横向滚动）
4. **题目问题显示区域**（新增）
5. 选项A、B、C、D
6. 上一题/下一题按钮

### 2. Activity代码修改

#### 2.1 添加TextView引用
**文件**：`ExamAnswerActivity.java`
**位置**：第36行

```java
private TextView tvBottomQuestion; // 底部选项窗口中的题目问题
```

#### 2.2 初始化TextView
**位置**：第200行

```java
tvBottomQuestion = findViewById(R.id.tv_bottom_question);
```

#### 2.3 阅读理解中显示题目
**位置**：`showReadingComprehensionQuestion()` 方法，第907-911行

```java
// 显示底部题目问题
if (tvBottomQuestion != null && question.question != null && !question.question.isEmpty()) {
    tvBottomQuestion.setVisibility(View.VISIBLE);
    tvBottomQuestion.setText(question.question);
}
```

#### 2.4 其他题型中隐藏题目
在 `showClozeTestQuestion()`、`showTranslationQuestion()`、`showWritingQuestion()` 方法中：

```java
// 隐藏底部题目问题
if (tvBottomQuestion != null) {
    tvBottomQuestion.setVisibility(View.GONE);
}
```

### 3. 调整BottomSheet高度
因为增加了题目问题显示区域，需要调整底部窗口的默认高度：

**代码修改**：第205行
```java
bottomSheetBehavior.setPeekHeight(360);  // 从280dp增加到360dp
```

**布局修改**：第201行
```xml
app:behavior_peekHeight="360dp"
```

## 显示效果

### 阅读理解部分
```
┌─────────────────────────────────┐
│  选择题号：                      │
│  [21] [22] [23] [24] [25]       │
├─────────────────────────────────┤
│ 21. According to Paragraph 1,  │  ← 新增的题目显示
│ the practice of tipping in the │
│ U.S. ____                       │
├─────────────────────────────────┤
│ A was regarded as a sign of... │
│ B was considered essential...  │
│ C was a way of rewarding...    │
│ D was optional in most...      │
└─────────────────────────────────┘
```

### 完形填空部分
```
┌─────────────────────────────────┐
│  选择题号：                      │
│  [1] [2] [3] [4] [5] ...       │
├─────────────────────────────────┤
│ A. illusion                     │  ← 题目问题不显示
│ B. discussion                   │
│ C. tradition                    │
│ D. question                     │
└─────────────────────────────────┘
```

## 修改文件列表
1. `app/src/main/res/layout/activity_exam_answer.xml`
   - 添加 `tv_bottom_question` TextView
   - 调整 `behavior_peekHeight` 从 280dp 到 360dp

2. `app/src/main/java/com/example/mybighomework/ExamAnswerActivity.java`
   - 添加 `tvBottomQuestion` 变量声明
   - 在 `initViews()` 中初始化
   - 在 `showReadingComprehensionQuestion()` 中显示题目
   - 在其他题型方法中隐藏题目
   - 调整 BottomSheet 高度

## 技术细节

### 可见性控制
- **阅读理解**：题目问题 `VISIBLE`
- **完形填空**：题目问题 `GONE`（题目已包含在文章中）
- **翻译**：题目问题 `GONE`（使用提示文本）
- **写作**：题目问题 `GONE`（使用提示文本）

### 文本格式
- 字体大小：15sp
- 字体粗细：bold
- 文字颜色：text_primary
- 内边距：水平16dp，垂直8dp

### 响应式设计
题目文本会根据内容自动换行，确保长题目也能完整显示。

## 测试步骤

### 测试1：阅读理解题目显示
1. 进入真题练习，切换到第21题（阅读理解）
2. **预期结果**：
   - 底部显示题号21-25
   - 题号下方显示完整题目"21. According to Paragraph 1..."
   - 题目下方显示选项A、B、C、D

### 测试2：完形填空题目不显示
1. 切换到第1-20题（完形填空）
2. **预期结果**：
   - 底部只显示题号1-20和选项
   - 不显示额外的题目问题

### 测试3：题目文本自动换行
1. 查看长题目（如第23题）
2. **预期结果**：
   - 题目文本完整显示
   - 自动换行，不会被截断

### 测试4：窗口高度适配
1. 在不同题型之间切换
2. **预期结果**：
   - 底部窗口高度为360dp
   - 所有内容都能正常显示
   - 不会遮挡上方的文章内容

## 优化建议

### 已实现
- ✅ 题目问题显示在选项上方
- ✅ 根据题型动态显示/隐藏
- ✅ 文本自动换行
- ✅ 调整窗口高度

### 未来可优化
- 📝 考虑为超长题目添加滚动支持
- 📝 可以为题目添加高亮效果
- 📝 可以添加题目类型图标

## 验证清单
- [x] 布局文件添加TextView
- [x] Activity声明和初始化变量
- [x] 阅读理解显示题目
- [x] 完形填空隐藏题目
- [x] 翻译和写作隐藏题目
- [x] 调整BottomSheet高度
- [x] 编译无错误

## 注意事项
1. 编译项目后需要重新安装APK
2. 题目文本从 `ExamQuestion.question` 字段获取
3. 只有在有选项的情况下才显示题目问题
4. TextView的初始visibility为GONE，由代码控制显示

