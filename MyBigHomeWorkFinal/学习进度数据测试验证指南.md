# 🧪 学习进度数据测试验证指南

## 📋 测试目标

验证主页面的学习进度数据能够与用户实际学习活动保持一致。

---

## 🔍 测试准备

### 1. 记录初始数据
在开始测试前,先记录主页面当前的数据:

| 数据项 | 初始值 |
|--------|--------|
| 学习连续天数 | _____ 天 |
| 词汇掌握量 | _____ 个 |
| 平均考试分数 | _____ 分 |
| 今日任务进度 | _____ /5 |

---

## ✅ 测试用例

### 测试用例 1: 词汇训练数据同步

#### 测试步骤
1. 打开应用,进入主页面
2. 记录当前"词汇掌握量"数值: _____ 个
3. 点击"词汇训练"
4. 完成10道词汇题,确保答对至少8道(正确率80%以上)
5. 点击"完成训练"
6. 返回主页面

#### 验证点
- [ ] 词汇掌握量应该增加(可能需要多次训练同一个词才会标记为掌握)
- [ ] 学习连续天数应该增加1天(如果今天还没学习过)
- [ ] 显示"训练数据已保存"提示

#### 预期结果
✅ 词汇掌握量根据掌握标准更新  
✅ 学习连续天数正确增加  
✅ 数据保存成功

---

### 测试用例 2: 模拟考试数据同步

#### 测试步骤
1. 打开应用,进入主页面
2. 记录当前"平均考试分数": _____ 分
3. 点击"模拟考试"
4. 完成至少10道题目
5. 点击"提交考试"或等待时间结束
6. 查看考试结果
7. 返回主页面

#### 验证点
- [ ] 平均考试分数应该更新
- [ ] 如果本次考试分数高于之前平均分,则平均分上升
- [ ] 如果本次考试分数低于之前平均分,则平均分下降
- [ ] 学习连续天数应该增加(如果今天还没学习过)
- [ ] 显示"考试成绩已保存"提示

#### 预期结果
✅ 平均考试分数根据本次成绩正确计算  
✅ 考试记录保存到数据库  
✅ 学习连续天数正确增加

---

### 测试用例 3: 真题练习数据同步

#### 测试步骤
1. 打开应用,进入主页面
2. 记录当前"平均考试分数": _____ 分
3. 点击"真题练习"
4. 答至少5道题
5. 点击返回按钮退出
6. 返回主页面

#### 验证点
- [ ] 平均考试分数应该更新(如果答了题)
- [ ] 学习连续天数应该增加(如果今天还没学习过)
- [ ] 显示"考试记录已保存"提示

#### 预期结果
✅ 即使没有完成所有题目,答题记录也会保存  
✅ 平均分数正确更新  
✅ 学习连续天数正确增加

---

### 测试用例 4: 学习连续天数验证

#### 测试步骤
1. **第1天**: 完成任意学习活动(词汇/考试)
2. 查看主页面学习连续天数: _____ 天
3. **第2天**: 再次完成任意学习活动
4. 查看主页面学习连续天数: _____ 天
5. **隔天**: 跳过一天不学习
6. **第4天**: 再次学习
7. 查看主页面学习连续天数: _____ 天

#### 验证点
- [ ] 连续学习时,天数递增(1→2)
- [ ] 中断后,天数重置为1
- [ ] 同一天多次学习,天数不重复增加

#### 预期结果
✅ 连续学习时天数正确累加  
✅ 学习中断后正确重置  
✅ 同一天多次学习不会重复计数

---

### 测试用例 5: 数据刷新及时性

#### 测试步骤
1. 进入"词汇训练",完成训练
2. **立即**返回主页面
3. 观察词汇掌握量是否更新
4. 进入"模拟考试",完成考试
5. **立即**返回主页面
6. 观察平均考试分数是否更新

#### 验证点
- [ ] 返回主页面后,数据在1秒内更新
- [ ] 不需要手动刷新
- [ ] 不需要重启应用

#### 预期结果
✅ 数据实时更新,响应迅速  
✅ 用户体验流畅

---

### 测试用例 6: 多次练习累积效果

#### 测试步骤
1. 记录初始词汇掌握量: _____ 个
2. 进行第1次词汇训练(10个词,80%正确率)
3. 返回主页,记录词汇数: _____ 个
4. 进行第2次词汇训练(相同的10个词,80%正确率)
5. 返回主页,记录词汇数: _____ 个
6. 进行第3次词汇训练(相同的10个词,80%正确率)
7. 返回主页,记录词汇数: _____ 个

#### 验证点
- [ ] 第1次训练后,词汇数可能不变(因为需要3次以上)
- [ ] 第2次训练后,词汇数可能不变
- [ ] 第3次训练后,词汇数应该增加(满足"≥3次且正确率≥80%")

#### 预期结果
✅ 词汇掌握判断标准正确执行  
✅ 需要多次验证才标记为掌握  
✅ 避免一次答对就算掌握

---

### 测试用例 7: 平均分计算准确性

#### 测试步骤
1. 清除所有考试记录(或记录当前平均分)
2. 完成第1次模拟考试,得分: _____ 分
3. 记录主页面平均分: _____ 分
4. 完成第2次模拟考试,得分: _____ 分
5. 记录主页面平均分: _____ 分
6. 手动计算平均分: (分数1 + 分数2) / 2 = _____ 分

#### 验证点
- [ ] 只有1次考试时,平均分 = 该次分数
- [ ] 2次考试后,平均分 = (分数1 + 分数2) / 2
- [ ] 主页面显示的平均分与手动计算一致

#### 预期结果
✅ 平均分计算逻辑正确  
✅ 所有考试类型都计入平均分

---

## 📊 测试结果记录表

| 测试用例 | 测试时间 | 测试结果 | 备注 |
|---------|---------|---------|------|
| 1. 词汇训练数据同步 | __/__/__ | ☐通过 ☐失败 | |
| 2. 模拟考试数据同步 | __/__/__ | ☐通过 ☐失败 | |
| 3. 真题练习数据同步 | __/__/__ | ☐通过 ☐失败 | |
| 4. 学习连续天数验证 | __/__/__ | ☐通过 ☐失败 | |
| 5. 数据刷新及时性 | __/__/__ | ☐通过 ☐失败 | |
| 6. 多次练习累积效果 | __/__/__ | ☐通过 ☐失败 | |
| 7. 平均分计算准确性 | __/__/__ | ☐通过 ☐失败 | |

---

## 🐛 常见问题排查

### 问题1: 词汇掌握量不增加

**可能原因:**
- 词汇练习次数不足3次
- 正确率低于80%
- 数据库查询出错

**排查方法:**
```
1. 检查数据库中vocabulary_records表
2. 查看某个词的correctCount和wrongCount
3. 计算正确率是否≥80%
4. 检查totalAttempts是否≥3
```

### 问题2: 平均分显示"--"

**可能原因:**
- 还没有任何考试记录
- 数据库查询返回NaN或Infinity

**排查方法:**
```
1. 完成至少一次考试
2. 检查exam_records表是否有记录
3. 查看日志中是否有数据库错误
```

### 问题3: 学习连续天数不增加

**可能原因:**
- 今天已经学习过(不会重复增加)
- updateStudyStreak()方法没有被调用
- 数据库更新失败

**排查方法:**
```
1. 检查UserSettingsEntity的lastStudyDate
2. 确认是否在不同的日期学习
3. 查看日志中的异常信息
```

### 问题4: 返回主页数据不更新

**可能原因:**
- onResume方法未被调用
- 后台线程查询失败
- UI更新出错

**排查方法:**
```
1. 在onResume中添加日志
2. 检查后台线程是否有异常
3. 确认runOnUiThread正常执行
```

---

## 🎯 验证标准

### 数据一致性标准
- ✅ **实时性**: 学习活动完成后,返回主页面立即看到更新
- ✅ **准确性**: 显示的数据与数据库中的数据完全一致
- ✅ **完整性**: 所有学习活动都会被记录和统计
- ✅ **可靠性**: 异常情况下不会崩溃,数据不丢失

### 性能标准
- ✅ 数据刷新时间 < 1秒
- ✅ 不阻塞UI线程
- ✅ 内存使用正常

---

## 📝 测试报告模板

```
测试日期: ____年__月__日
测试人员: __________
测试设备: __________
应用版本: __________

总测试用例数: 7
通过用例数: __
失败用例数: __
通过率: ___%

主要发现:
1. ________________
2. ________________
3. ________________

建议改进:
1. ________________
2. ________________
3. ________________

总体评价: ☐优秀 ☐良好 ☐合格 ☐不合格
```

---

## ✅ 测试完成检查清单

测试完成后,确认以下所有项目:

- [ ] 所有7个测试用例都已执行
- [ ] 测试结果已记录
- [ ] 发现的问题已记录
- [ ] 数据一致性验证通过
- [ ] 性能表现符合预期
- [ ] 用户体验流畅
- [ ] 无崩溃和严重错误

---

## 🎉 祝测试顺利!

如有任何问题,请参考《主页面学习进度数据一致性实现报告.md》中的技术细节。

